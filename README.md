# 世論トレンド分析システム - プロトタイプ

## 概要

SNS・ニュースサイトから情報を収集し、世論の傾向を捉えるアプリケーションのプロトタイプ。
はてなブックマークRSSから記事を取得し、キーワード抽出と感情分析を行います。

## 実装済み機能

### ✅ データ収集
- はてなブックマークRSS取得
  - カテゴリ別（総合、テクノロジー、政治、経済、エンタメ）
  - 複数カテゴリの並行取得

### ✅ 分析機能
- **形態素解析**: kuromoji.js（純粋JavaScript、外部依存なし）
- **キーワード抽出**: 名詞を抽出して頻度カウント
- **感情分析**: 辞書ベースでポジティブ/ネガティブスコアを算出

### ✅ 可視化
- 頻出キーワードTOP表示（棒グラフ）
- 感情トレンド（ポジティブ/ネガティブ/中立の比率）
- キーワード×感情のクロス分析
- カテゴリ比較分析

## 技術スタック

- **言語**: JavaScript (ES Module)
- **ランタイム**: Node.js
- **主要ライブラリ**:
  - `rss-parser`: RSSフィード解析
  - `kuromoji`: 日本語形態素解析（純粋JS、辞書内蔵）
  - `axios`: HTTP通信

## セットアップ

```bash
# 依存パッケージインストール
npm install

# 各スクリプトの実行
npm test           # RSS取得テスト
npm run analyze    # キーワード抽出テスト
npm run sentiment  # 感情分析テスト
npm run integration  # 統合テスト（推奨）
npm run compare    # カテゴリ比較分析
```

## 使い方

### 基本的な統合分析

```bash
npm run integration
```

**出力例**:
```
🔑 頻出キーワード TOP 10
  1. AI            12回 ██████
  2. システム         8回 ████
  3. 政治            6回 ███
  ...

😊 感情トレンド分析
  平均感情スコア: +0.65
  ポジティブ: 4件 (40.0%) ████████████
  ネガティブ: 1件 (10.0%) ███
  中立:       5件 (50.0%) ███████████████
```

### カテゴリ別分析

```bash
# 特定カテゴリの分析（tech, politics, economics, entertainment）
node test-integration.js single tech 20
```

### 複数カテゴリの比較

```bash
npm run compare
```

**出力例**:
```
📊 カテゴリ比較サマリー
カテゴリ      平均スコア  ポジ率  ネガ率  中立率
general       +0.65      40.0%   10.0%   50.0%
tech          +1.20      55.0%    5.0%   40.0%
politics      -0.30      20.0%   30.0%   50.0%
```

## プロジェクト構成

```
news-crawler/
├── test-hatena.js          # はてなブックマークRSS取得
├── test-analyzer.js        # 形態素解析 + キーワード抽出
├── test-sentiment.js       # 感情分析
├── test-integration.js     # 統合テスト（全機能）
├── sentiment-dictionary.js # 感情辞書
├── package.json
└── README.md
```

## 検証結果

### ✅ 成功した機能
1. **データ取得**: はてなブックマークRSS（複数カテゴリ）から正常に記事取得
2. **形態素解析**: kuromoji.jsで日本語テキストを正確に分析
3. **キーワード抽出**: 頻出名詞TOP抽出、ノイズ除去も機能
4. **感情分析**: ポジティブ/ネガティブ単語を検出、スコア算出

### 📊 精度評価

**キーワード抽出精度**: ⭐⭐⭐⭐☆ (4/5)
- 固有名詞、一般名詞の抽出は良好
- 1文字の名詞を除外してノイズ削減
- 複合語の扱いに改善の余地

**感情分析精度**: ⭐⭐⭐☆☆ (3/5)
- シンプル辞書ベースのため基本的な感情は検出
- 文脈理解が不十分（「良くない」を「良い」と誤検出の可能性）
- 否定表現の扱いに改善の余地

## 今後の拡張案

### フェーズ2: データソース拡大
- [ ] Reddit API統合（無料枠60req/min）
- [ ] ニュースサイトRSS追加（NHK、朝日新聞、読売新聞など）
- [ ] ブログRSS追加（はてなブログ、note など）

### フェーズ3: 分析精度向上
- [ ] 感情分析の高度化（ML-Ask、BERT日本語モデル）
- [ ] トピックモデリング（LDA）
- [ ] 時系列分析（トレンド変化の検出）

### フェーズ4: UI/UX
- [ ] Electron化（デスクトップアプリ）
- [ ] ダッシュボードUI（React）
- [ ] データベース永続化（SQLite）
- [ ] グラフ可視化（Chart.js、Recharts）

### フェーズ5: 高度な機能
- [ ] トレンドアラート（特定キーワードの急増検知）
- [ ] カスタム辞書（ユーザー定義のポジティブ/ネガティブ単語）
- [ ] レポートエクスポート（PDF、CSV）
- [ ] スケジュール実行（定期的な自動収集）

## 技術的な学び

### 成功したアプローチ
- **kuromoji.js**: 純粋JavaScriptで形態素解析、外部依存なし、辞書内蔵で便利
- **辞書ベース感情分析**: プロトタイプには十分、実装が簡単
- **ES Module**: 最新のJavaScript仕様で開発、import/export がシンプル

### 課題と解決策
- **辞書パス問題**: `import.meta.resolve()` では動作せず、`__dirname`で解決
- **感情分析の精度**: より高度な分析にはML-Ask や BERT が必要
- **データ取得の制約**: 公式API有料化、スクレイピング規約厳格化

## ライセンス

MIT

## 作成日

2025年10月25日
