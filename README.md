# 世論トレンド分析システム

## 概要

**SNS（ユーザーの意見）とマスコミ（報道機関の意見）の違いを可視化する分析システム**

はてなブックマーク、ニュースメディア（NHK、日経、Yahoo!ニュース）からデータを収集し、キーワード抽出と感情分析によって世論の傾向を捉えます。

## 🎯 最終目的

**SNS vs メディアの比較可視化**
- ユーザーが注目するトピック vs 報道機関が報道するトピック
- 同じ話題に対する感情の違い
- キーワード頻度の違い
- バイアス検出・トレンド時間差の分析

## 実装済み機能

### ✅ データ収集（Phase 2完了）

#### SNS系（ユーザーの意見）
- **はてなブックマーク**
  - カテゴリ別（総合、テクノロジー、政治、経済、エンタメ）
  - 複数カテゴリの並行取得

#### メディア系（報道機関の意見）
- **NHKニュース**（総合ニュース）
- **日経ビジネス**（ビジネス特化）
- **日経クロステック**（技術・土木特化）
- **Yahoo!ニュース**（総合ニュース）

### ✅ 分析機能

- **形態素解析**: kuromoji.js（純粋JavaScript、外部依存なし）
- **キーワード抽出**: 名詞を抽出して頻度カウント
- **感情分析**: 辞書ベースでポジティブ/ネガティブスコアを算出
- **SNS vs メディア比較分析**:
  - 感情トレンド比較
  - 注目キーワード比較
  - 独自キーワード分析

### ✅ 可視化

- 頻出キーワードTOP表示（棒グラフ）
- 感情トレンド（ポジティブ/ネガティブ/中立の比率）
- SNS vs メディアの比較レポート
- キーワード×感情のクロス分析

## 技術スタック

- **言語**: JavaScript/TypeScript (ES Module)
- **ランタイム**: Node.js + Electron
- **UI**: React + Material-UI
- **ビルド**: Vite
- **主要ライブラリ**:
  - `rss-parser`: RSSフィード解析
  - `kuromoji`: 日本語形態素解析（純粋JS、辞書内蔵）
  - `axios`: HTTP通信

## セットアップ

```bash
# 依存パッケージインストール
npm install

# Electronアプリ起動
npm start

# 開発モード
npm run dev
```

## 使い方

### 📱 Electronアプリ（GUI）

```bash
npm start
```

デスクトップアプリが起動し、ダッシュボードから分析を実行できます。

### 🖥️ コマンドライン（テスト）

#### SNS vs メディア比較分析（推奨）

```bash
npm run test:comparison
```

**出力例**:
```
📊 SNS vs メディア 比較分析レポート
======================================================================

📈 1. 感情トレンド比較

【SNS（ユーザーの意見）】
  平均感情スコア: +0.65
  😊 ポジティブ: 8件 (40.0%)
  😔 ネガティブ: 2件 (10.0%)
  😐 中立:      10件 (50.0%)

【メディア（報道機関の意見）】
  平均感情スコア: +0.10
  😊 ポジティブ: 3件 (20.0%)
  😔 ネガティブ: 2件 (13.3%)
  😐 中立:      10件 (66.7%)

🔑 2. 注目キーワード比較

【SNS（ユーザーが注目）】
  1. アニメ        8回
  2. ゲーム        6回
  3. 給料         6回
  ...

【メディア（報道が注目）】
  1. トランプ      8回
  2. 大統領       7回
  3. ASEAN       4回
  ...

🎯 3. 独自キーワード分析

【SNSで特に注目されているキーワード】
  1. アニメ (8回)
  2. ゲーム (6回)
  3. 給料 (6回)

【メディアで特に報道されているキーワード】
  1. トランプ (8回)
  2. 大統領 (7回)
  3. ASEAN (4回)
```

#### ニュースRSS取得テスト

```bash
npm run test:news
```

#### SNS（はてブ）データ取得テスト

```bash
npm test
```

#### 個別分析機能

```bash
npm run analyze      # キーワード抽出
npm run sentiment    # 感情分析
npm run integration  # 統合テスト
```

## プロジェクト構成

```
news-crawler/
├── electron/                  # Electronメインプロセス
├── src/                       # React UIコンポーネント
├── test-hatena.js            # はてブRSS取得（SNS系）
├── test-news-rss.js          # ニュースRSS取得（メディア系）
├── test-comparison.js        # SNS vs メディア比較分析 ⭐NEW
├── test-analyzer.js          # 形態素解析 + キーワード抽出
├── test-sentiment.js         # 感情分析
├── test-integration.js       # 統合テスト
├── sentiment-dictionary.js   # 感情辞書
├── package.json
├── CLAUDE.md                 # 開発記録
└── README.md                 # 本ファイル
```

## 検証結果

### ✅ 成功した機能

1. **データ取得**: はてブ + ニュースメディア（5ソース）から正常取得
2. **形態素解析**: kuromoji.jsで日本語テキストを正確に分析
3. **キーワード抽出**: 頻出名詞TOP抽出、ノイズ除去も機能
4. **感情分析**: ポジティブ/ネガティブ単語を検出、スコア算出
5. **SNS vs メディア比較**: 明確な違いを可視化できることを確認 ⭐NEW

### 📊 精度評価

| 機能 | 精度 | 評価 |
|------|------|------|
| データ収集 | ⭐⭐⭐⭐⭐ | 安定、法的リスク最小 |
| キーワード抽出 | ⭐⭐⭐⭐☆ | 固有名詞・一般名詞の抽出良好 |
| 感情分析 | ⭐⭐⭐☆☆ | 基本的な感情検出は可能 |
| SNS vs メディア比較 | ⭐⭐⭐⭐☆ | 明確な傾向の違いを可視化可能 |

### 🎯 比較分析の発見例

**2025年10月26日の分析結果**:

- **SNS（ユーザー）**: アニメ、ゲーム、給料など日常生活・趣味系に関心
- **メディア（報道）**: トランプ、大統領、ASEANなど政治・国際系を報道

→ **ユーザーの関心と報道内容に明確な違いがある**ことを確認

## 今後の拡張案

### 優先度: 高（フェーズ3）

#### データソース拡大
- [ ] Reddit API統合（無料枠60req/min）
- [ ] ブログRSS追加（はてなブログ、note）
- [ ] 朝日新聞、読売新聞のRSS（要調査）

#### 比較分析機能の強化
- [ ] 時系列比較（SNSとメディアのトレンド時間差）
- [ ] トピック別比較（政治、経済、エンタメなど）
- [ ] 感情スコアの差分グラフ化

### 優先度: 中（フェーズ4）

#### 分析精度向上
- [ ] 感情分析の高度化（ML-Ask、BERT日本語モデル）
- [ ] トピックモデリング（LDA）
- [ ] 係り受け解析（CaboCha統合検討）

#### UI/UX改善
- [ ] ダッシュボード強化（React UI）
- [ ] リアルタイム更新機能
- [ ] グラフ可視化強化（時系列グラフ、ワードクラウド）

### 優先度: 低（フェーズ5以降）

#### 高度な機能
- [ ] トレンドアラート（特定キーワードの急増検知）
- [ ] カスタム辞書（ユーザー定義のポジティブ/ネガティブ単語）
- [ ] レポートエクスポート（PDF、CSV）
- [ ] スケジュール実行（定期的な自動収集）

## 技術的な学び

### 成功したアプローチ

- **kuromoji.js**: 純粋JavaScriptで形態素解析、外部依存なし、辞書内蔵で便利
- **辞書ベース感情分析**: プロトタイプには十分、実装が簡単
- **ES Module**: 最新のJavaScript仕様で開発、import/export がシンプル
- **データソース分類**: `sourceType: 'sns' | 'media'` で明確に分類、比較分析が容易

### 課題と解決策

- **辞書パス問題**: `import.meta.resolve()` では動作せず、`__dirname`で解決
- **感情分析の精度**: タイトルだけでは精度不十分、本文も含めた分析が必要
- **データ取得の制約**: 公式API有料化、スクレイピング規約厳格化

## ライセンス

MIT

## 作成日

2025年10月25日

## Phase 2完了日

2025年10月26日
